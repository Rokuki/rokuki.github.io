<!DOCTYPE html>

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

  <meta name="description" content="目录结构123456└── bouseng    ├── bouseng.py    ├── __init__.py    ├── LICENSE    ├── README.md    └── setup.py

创建项目根目录12mkdir bouseng_packagecd bouseng_p">


	<meta name="keywords" content="deep learning, PyTorch, Python, Computer vision">

<link rel="alternate" href="/atom.xml" title="BouSeng" type="application/atom+xml">
<meta name="theme-color" content="#a1d0f6">
<title>发布代码到pypi - BouSeng</title>
<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<link rel="shortcut icon" href="/favicon.png">
<link rel="stylesheet" href="/css/style.css">
<nav class="main-nav">
	
	    <a href="/">← 主页</a>
	
	
	    <a href="/about/">About</a>
	
	    <a href="/archives/">Archives</a>
	
	<a class="cta" href="/atom.xml" data-no-instant>订阅</a>
</nav>

<section id="wrapper">
    <article class="post">
    <header>
        
            <h1>发布代码到pypi</h1>
        
        <h2 class="headline">Jul 17 2019
        
        </h2>
    </header>
</article>
<section id="post-body"><h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">└── bouseng</span><br><span class="line">    ├── bouseng.py</span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── LICENSE</span><br><span class="line">    ├── README.md</span><br><span class="line">    └── setup.py</span><br></pre></td></tr></table></figure>

<h2 id="创建项目根目录"><a href="#创建项目根目录" class="headerlink" title="创建项目根目录"></a>创建项目根目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir bouseng_package</span><br><span class="line">cd bouseng_package</span><br></pre></td></tr></table></figure>

<p>创建代码存放目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir bouseng</span><br><span class="line">cd bouseng</span><br></pre></td></tr></table></figure>

<h2 id="代码格式"><a href="#代码格式" class="headerlink" title="代码格式"></a>代码格式</h2><p>编写主运行文件<code>bouseng.py</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch bouseng.py</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_f</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'This is pypi project——bouseng'</span>)</span><br></pre></td></tr></table></figure>

<p>编写<code>__init__.py</code>文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch __init__.py</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> absolute_import</span><br><span class="line"><span class="keyword">from</span> .bouseng <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">name = <span class="string">'bouseng'</span></span><br></pre></td></tr></table></figure>

<h2 id="setup-py"><a href="#setup-py" class="headerlink" title="setup.py"></a>setup.py</h2><p>主要写项目信息，如项目版本、作者邮箱、作者名字等等。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> setuptools</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'README.md'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    long_description = f.read()</span><br><span class="line"></span><br><span class="line">setuptools.setup(</span><br><span class="line">    name = <span class="string">'bouseng'</span>,</span><br><span class="line">    version = <span class="string">'0.0.1'</span>,</span><br><span class="line">    author = <span class="string">'bouseng'</span>,</span><br><span class="line">    author_email = <span class="string">'c@bouseng.com'</span>,</span><br><span class="line">    description = <span class="string">'pypi project demo'</span>,</span><br><span class="line">    long_description = long_description,</span><br><span class="line">    long_description_content_type = <span class="string">'text/markdown'</span>,</span><br><span class="line">    url = <span class="string">'https://github.com/rokuki'</span>,</span><br><span class="line">    packages = setuptools.find_packages(),</span><br><span class="line">    classifiers = [</span><br><span class="line">        <span class="string">'Programming Language :: Python :: 3'</span>,</span><br><span class="line">        <span class="string">'License :: OSI Approved :: MIT License'</span>,</span><br><span class="line">        <span class="string">'Operating System :: OS Independent'</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="README-md"><a href="#README-md" class="headerlink" title="README.md"></a>README.md</h2><p>项目详细简介，可写<code>markdown</code>格式</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## This is pypi demo</span></span><br></pre></td></tr></table></figure>

<h2 id="LICENSE"><a href="#LICENSE" class="headerlink" title="LICENSE"></a>LICENSE</h2><p>MIT许可证（The MIT License）是许多软件授权条款中，被广泛使用的其中一种。与其他常见的软件授权条款（如GPL、LGPL、BSD）相比，MIT是相对宽松的软件授权条款。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Copyright (C) 2019 bouseng</span><br><span class="line"></span><br><span class="line">　　Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</span><br><span class="line">　　</span><br><span class="line">　　The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</span><br><span class="line">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span><br></pre></td></tr></table></figure>

<p>到此项目代码就准备完毕了，可以进行上传到pypi的工作</p>
<h2 id="pypi"><a href="#pypi" class="headerlink" title="pypi"></a>pypi</h2><p>在目录下执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py sdist bdist_wheel</span><br></pre></td></tr></table></figure>

<p>执行完毕，生成<code>bouseng.egg-info</code>，<code>build</code>，<code>dist</code>三个文件夹</p>
<h3 id="注册pypi账号"><a href="#注册pypi账号" class="headerlink" title="注册pypi账号"></a>注册pypi账号</h3><p><a href="https://pypi.org/account/register/" target="_blank" rel="noopener">注册pypi</a><br><a href="https://test.pypi.org/account/register/" target="_blank" rel="noopener">注册测试版pypi</a></p>
<h3 id="安装twine模块"><a href="#安装twine模块" class="headerlink" title="安装twine模块"></a>安装twine模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install twine</span><br></pre></td></tr></table></figure>

<h3 id="上传"><a href="#上传" class="headerlink" title="上传"></a>上传</h3><p>这里注册的是test版本的pypi，所以加上<code>repository-url</code>选项注明test版url</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">twine upload --repository-url https://test.pypi.org/legacy/ dist/*</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.ax1x.com/2019/07/17/Zq5sdf.png" alt="Zq5sdf.png"><br>访问<a href="https://test.pypi.org/user/bouseng/" target="_blank" rel="noopener">https://test.pypi.org/user/bouseng/</a>,出现1project即表示上传项目成功。</p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install bouseng</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.ax1x.com/2019/07/17/Zq5bYF.png" alt="Zq5bYF.png"></p>
</section>
    
        
        <h2 class="footline">
            <a href="/tags/pypi/#pypi">pypi</a>
        </h2>
    

    <footer id="post-meta" class="clearfix">
        <a href="/about/">
        <img class="avatar" src="/images/avatar.png">
        <div>
            <span class="dark">BouSeng</span>
            <span>What I cannot create, I do not understand</span>
        </div>
        </a>
        <section id="sharing">
            <a title="Share to Twitter" class="twitter" href="https://twitter.com/intent/tweet?text=bouseng.com/2019/07/17/发布代码到pypi/ - 发布代码到pypi @"><span class="icon-twitter">tweet</span></a>
            <a title="Share to Facebook" class="facebook" href="#" onclick="
                window.open(
                  'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
                  'facebook-share-dialog',
                  'width=626,height=436');
                return false;"><span class="icon-facebook-sign">Share</span>
            </a>
        </section>
    </footer>


  <section id="comment">
    <button class="btn" id="loadcmts" onclick="cmts.load();">加载评论</button>
    <div id="gitment"></div>
    <script src='/js/gitment.browser.js'></script>
    <link rel="stylesheet" href=''>
    <script>
      var cmts={
        load:function cmts(){
          var gitment = new Gitment({
          
            id: "发布代码到pypi",
          
            owner: "",
            repo: "",
            oauth: {
              client_id: "",
              client_secret: "",
            },
          })
          gitment.render('gitment');
          var loadcmt = document.getElementById("loadcmts");
          var imyourfather = loadcmt.parentNode;
          imyourfather.removeChild(loadcmts)
        }
      }
    </script>
  </section>


	<footer id="footer">
	<div id="social">
		<p class="small">©  BouSeng Chan| Powered by Hexo & 
			<a href="https://github.com/F0r3at/Lights"> Lights</a>
		</p>
	</div>
</footer>

</section>

	<script src="//cdnjs.loli.net/ajax/libs/instantclick/3.0.1/instantclick.min.js" data-no-instant></script>
	<script data-no-instant>
		
		InstantClick.init('mousedown');
	</script>



